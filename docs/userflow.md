-----

### 📄 Userflow v1.3 (전환율 최적화 및 안정화)

위 `PRD v1.3`을 기반으로 작성된 최종 Userflow입니다.

  * **문서 버전:** v1.3
  * **관련 문서:** `PRD v1.3`

> ### 📢 v1.3 변경 로그 (Change Log)
>
>   * **[P0 KPI 가입 전환율]** `Flow 4 (초대 합류)`를 'Guest Preview'에서 \*\*'초대 컨텍스트 인증 벽(Contextual Auth Wall)'\*\*으로 전면 수정. 가입 동기를 명확히 제시.
>   * **[P0 KPI 재방문율]** **`Flow 7 (방 나가기)`** 플로우를 P0(필수)로 **신규 추가**.
>   * **[성장]** **`Flow 6 (재초대)`** 플로우를 `F-06`으로 명시.
>   * **[안정성]** `Flow 4`에 **'유효하지 않은 초대(Error)'** 분기를 **신규 추가**.

-----

### 2\. 🌊 핵심 Userflows

#### Flow 1: 신규 방문자 가입 / 로그인 (Organic Landing)

  * **목표:** '초대 없이' 방문한 사용자를 가입/로그인시킨다.

<!-- end list -->

1.  **[시작]** 비로그인 사용자가 **메인 URL**(`minimal-chat.com`)에 접속합니다.
2.  **[표시]** '스플래시 랜딩 페이지'(`Flow 1`)가 표시됩니다.
3.  **[표시]** `[로그인]` / `[회원가입]` 버튼, `[비밀번호 찾기]`(`Flow 1.5`) 링크가 노출됩니다.
4.  **[사용자 행동]** 사용자가 가입/로그인을 완료합니다.
5.  **[시스템]** (쿠키에 `invite_token`이 없는지 확인)
6.  **[종료]** → `Flow 2 (첫 로그인 온보딩)`로 이동합니다.

#### Flow 1.5: 비밀번호 찾기 (Account Recovery)

  * **(v1.2와 동일. P0 필수)**

<!-- end list -->

1.  ... (이메일 입력 → 재설정 링크 클릭 → 새 비밀번호 설정) ...
2.  **[종료]** → `Flow 1`의 '로그인' 폼으로 리디렉션.

#### Flow 2: 첫 로그인 온보딩 (First-Time Onboarding)

  * **(v1.2와 동일)**

<!-- end list -->

1.  **[시작]** `Flow 1`에서 '초대 없이' 가입/로그인한 사용자가 진입합니다.
2.  **[표시]** '메인 대시보드(채팅 목록)' (`F-01`)가 'Empty State'로 표시됩니다.
3.  **[표시]** `[새 채팅 시작]` 버튼(`F-02`)이 노출됩니다.
4.  **[종료]**

#### Flow 3: 핵심 루프 - 채팅방 생성 (Room Naming)

  * **(v1.2와 동일)**

<!-- end list -->

1.  **[시작]** `Flow 2`의 사용자가 `[새 채팅 시작]` 버튼(`F-02`)을 클릭합니다.
2.  **[표시]** "새 채팅방 이름을 입력하세요" 팝업이 뜹니다.
3.  **[사용자 행동]** 이름 입력 후 [만들기] 클릭.
4.  **[시스템]** 방 생성.
5.  **[표시]** 즉시 생성된 '채팅방' 화면으로 이동합니다.
6.  **[종료]** (방 내부에서 `Flow 6`을 통해 초대 가능)

#### Flow 4: 핵심 루프 - 초대 및 합류 (Invitation & Contextual Auth Wall)

  * **목표:** '초대'로 유입된 사용자의 가입 동기를 극대화하고 즉시 합류시킨다.
  * **관련 PRD:** `F-00.1`, `F-00.2`, `7.5`, `7.6`

<!-- end list -->

1.  **[시작]** User B가 '초대 URL'(`.../chat/uuid-123`)을 클릭합니다.
2.  **[시스템]** **`invite_token` (uuid-123)을 세션/쿠키에 즉시 저장**합니다.
3.  **[시스템]** 서버에 `invite_token`의 **유효성을 검증**합니다.
4.  **[조건 분기 (Error)]** - (v1.3 신규)
      * **IF (Token 유효하지 않음):**
      * 4a. **[표시]** `PRD 7.6`에 정의된 **"유효하지 않은 초대 링크입니다." 에러 페이지**를 표시합니다.
      * 4b. **[표시]** `[메인으로 가기]` 버튼을 제공합니다. (클릭 시 `Flow 1`로 이동)
      * 4c. **[종료]**
5.  **[조건 분기 (Token 유효)]**
      * 5a. **[시스템]** User B의 로그인 상태를 확인합니다.
      * 5b. **IF (로그인 O):**
          * 5c. [시스템] User B를 `uuid-123` 채팅방에 즉시 추가합니다.
          * 5d. [표시] **즉시 '채팅방' 화면으로 이동**합니다.
          * 5e. [종료]
      * 5f. **IF (로그인 X):** - (v1.3 핵심 변경)
          * 5g. **[표시]** `Flow 1`(일반 랜딩)이 아닌, \*\*'초대 컨텍스트 인증 페이지' (`PRD 7.5`)\*\*로 이동합니다.
          * 5h. **[표시]** 이 페이지에는 \*\*"OOO방에 초대되었습니다\!"\*\*와 같은 명확한 '초대 동기'가 표시됩니다.
          * 5i. **[표시]** 그 하단에 `F-00.1 (회원가입)` / `F-00.2 (로그인)` 폼이 노출됩니다.
          * 5j. **[사용자 행동]** User B가 (명확한 동기를 가지고) 가입 또는 로그인을 완료합니다.
          * 5k. **[시스템]** 가입/로그인 성공. 쿠키의 `invite_token`을 확인하여 `uuid-123` 방에 참여시킵니다.
          * 5l. **[표시]** **즉시 '채팅방' 화면으로 이동**합니다.
          * 5m. [종료]

#### Flow 5: 재방문 및 복귀 (Re-engagement)

  * **목표:** 기존 사용자가 쉽고 빠르게 대화에 복귀하거나, 목록을 관리한다.

<!-- end list -->

1.  **[시작]** 로그인한 기존 사용자가 메인 URL에 접속합니다.
2.  **[표시]** '메인 대시보드(채팅 목록)' (`F-01`)가 표시됩니다. (최신순 정렬 + 안 읽음 배지)
3.  **[사용자 행동 (분기)]**
      * **IF (채팅방 클릭):** '채팅방' 화면으로 이동합니다. (→ `Flow 6` 가능)
      * **IF (채팅방 우클릭/롱프레스):** → `Flow 7 (방 나가기)` 옵션 노출.
4.  **[종료]**

#### Flow 6: 재초대 흐름 (Re-Invitation)

  * **(v1.2의 신규 P0 플로우)**

<!-- end list -->

1.  **[시작]** 사용자가 '채팅방' 내부에 있습니다.
2.  **[표시]** 방 헤더 또는 설정 메뉴의 `[초대하기]` 버튼(`F-06`)이 항상 표시됩니다.
3.  **[사용자 행동]** 사용자가 `[초대하기]` 버튼을 클릭합니다.
4.  **[표시]** '초대 URL' 복사 팝업이 뜹니다.
5.  **[종료]** (공유된 URL은 `Flow 4`를 유발)

#### Flow 7: 방 나가기 (Leave Room)

  * **(v1.3 신규 P0 플로우)**
  * **목표:** 사용자가 채팅 목록을 '미니멀'하게 관리할 수 있게 한다.

<!-- end list -->

1.  **[시작]** 사용자가 `Flow 5`에서 '방 나가기'를 선택했습니다.
2.  **[표시]** **"정말 '우리 반' 방을 나가시겠습니까?"** 확인 팝업(`F-07`)이 뜹니다.
3.  **[사용자 행동]** 사용자가 [확인]을 클릭합니다.
4.  **[시스템]** 사용자를 해당 방에서 제거합니다.
5.  **[표시]** `Flow 5`의 '메인 대시보드'로 복귀하며, 해당 방이 목록에서 사라집니다.
6.  **[종료]**