-----

### 1\. 📄 `PRD v1.3` (전환율 최적화 및 안정화)

`PRD v1.1`(당신이 전달해 준 버전)을 기반으로, v1.3으로 수정했습니다.

  * **문서 버전:** v1.3 (Conversion & Stability Patch)
  * **작성일:** 2025년 11월 14일
  * **관련 문서:** `requirement.md (v1.6)`

> ### 📢 v1.3 변경 로그 (Change Log)
>
>   * **[P0 KPI 가입 전환율]** '초대받은' 비로그인 사용자는 일반 랜딩이 아닌 \*\*'초대 컨텍스트'\*\*가 명시된 별도 인증 페이지로 연결. (`7. 비-기능`에 정책 추가)
>   * **[P0 KPI 재방문율]** **`F-07 (방 나가기)`** 기능을 P0(필수)로 **신규 추가**. 사용자가 채팅 목록을 관리할 수 있도록 보장. (섹션 5, 6 수정)
>   * **[안정성]** \*\*'유효하지 않은 초대'\*\*에 대한 에러 처리 정책을 '비-기능'에 **신규 추가**. (섹션 7 수정)
>   * **(v1.2의 필수 수정 사항 계승)** `F-00.3 (비밀번호 찾기)` P0 상향, `F-02 (방 생성)` 시 '방 이름 입력' 명세 반영.

-----

### 5\. 🚀 MVP 핵심 기능 명세 (The "What")

| 우선순위 | 기능 ID | 기능명 | 요구사항 (What) | 비고 (Why) |
| :--- | :--- | :--- | :--- | :--- |
| **P0** | **F-00.1** | **회원가입** | - 사용자는 '이메일, 비밀번호, 닉네임'을 입력하여 가입할 수 있다.<br>- **[v1.3 수정] (비-기능 `7.5` 참조) '초대 컨텍스트'가 있는 경우, 가입 페이지에 'OOO방에 초대되었습니다'라는 동기를 명시한다.** | 사용자 식별 및 데이터 지속성의 핵심. |
| **P0** | **F-00.2** | **로그인 / 로그아웃** | - 사용자는 '이메일, 비밀번호'로 로그인할 수 있다.<br>- **[v1.3 수정] '초대 컨텍스트'가 있는 경우, 로그인 페이지에도 동기를 명시한다.** | 서비스 재방문을 위한 필수 기능. |
| **P0** | **F-00.3** | **비밀번호 찾기** | - **[v1.2 계승]** 사용자는 로그인 폼 하단의 링크로 비밀번호 재설정 요청 가능. (이메일 인증) | **`P0: 재방문율(Retention)` 달성을 위한 필수 복구 수단.** |
| **P0** | F-01 | **메인 대시보드 (채팅 목록)** | - 로그인한 사용자는 본인이 참여 중인 '채팅방 목록'을 볼 수 있다.<br>- **[v1.3 수정] 사용자는 이 목록에서 `F-07 (방 나가기)`를 수행할 수 있다.** (예: 우클릭, 롱프레스) | 사용자의 '홈 베이스'. |
| **P0** | F-02 | **채팅방 생성 및 초대** | - **[v1.2 계승]** '새 채팅 시작' 버튼 클릭 시, '채팅방 이름' 입력 모달을 띄운다.<br>- 이름 입력 후 방 생성, 즉시 해당 방으로 이동.<br>- 사용자는 방 내부(`F-06`)에서 '초대 URL'을 발급받는다. | '이름 없는' 방이 쌓이는 UX 결함을 수정. |
| **P0** | F-03 | **텍스트 및 이모지 전송** | (v1.1과 동일) | 기본 대화 + '재미' 요소. |
| **P0** | F-04 | **메시지 답장 (Reply)** | (v1.1과 동일) | 그룹 채팅의 맥락 유지. |
| **P0** | F-05 | **메시지 좋아요** | (v1.1과 동일) | '부담 없는' 소통을 위한 핵심 '재미' 기능. |
| **P0** | **F-06** | **[v1.3 신규]**<br>**재초대 (방 내부)** | - **사용자는 채팅방 내부(예: 헤더, 설정)에 항상 노출되는 `[초대하기]` 버튼을 통해 초대 URL을 언제든 다시 복사할 수 있다.** | **핵심 성장 동력(Growth Loop)의 완성.** |
| **P0** | **F-07** | **[v1.3 신규]**<br>**방 나가기 (Leave Room)** | - **사용자는 `F-01 (대시보드)` 또는 방 내부에서 '방 나가기'를 할 수 있다.**<br>- '나가기' 확인 팝업을 거친다.<br>- 완료 시, 방은 목록에서 즉시 사라진다. | **`P0: 재방문율` 및 '미니멀리즘' 가치 유지를 위한 필수 기능.** |
| **P1** | F-08 | **메시지 삭제** | - (v1.1의 `F-06`에서 ID 변경) '모두에게/나에게만 삭제' | 실수로 보낸 메시지를 수정. |

*모든 채팅 관련 기능의 상세 기술 구현은 `requirement.md (v1.6)` 문서를 100% 준수합니다.*

-----

### 6\. 🚫 MVP 제외 범위 (Post-MVP)

  * `소셜 로그인 (구글, 카카오 등)`
  * **[v1.2 계승] `비밀번호 찾기` (P0로 상향되어 제외 목록에서 제거됨)**
  * `이메일 인증` (비밀번호 찾기 시에만 이메일 실재성 검증)
  * `@멘션 기능`
  * `그룹 관리 기능 (Kick, 방장 위임 등)`
  * `파일 및 이미지 전송`
  * `사용자 검색` 및 `친구 목록`

-----

### 7\. ⚖️ 비-기능 요구사항 (Constraints)

  * **7.1 성능 (P1):** (v1.1과 동일)
  * **7.2 플랫폼 (필수):** **Next.js** 기반 반응형 웹앱.
  * **7.3 기술 스펙 (필수):** (v1.1과 동일) `requirement.md (v1.6)` 준수.
  * **7.4 보안:** (v1.1과 동일)
  * **7.5 [v1.3 수정] 초대 컨텍스트 및 인증 벽 (Contextual Auth Wall)**
      * **사용자가 초대 URL(`.../chat/uuid`)을 통해 방문 시, 해당 '초대 정보(invite\_token)'는 세션/쿠키에 반드시 저장되어야 합니다.**
      * **[v1.3 핵심] 비로그인 사용자는 'Guest Preview'가 아닌, "OOO방에 초대되었습니다"와 같이 '초대 컨텍스트(동기)'가 명시된 '인증 전용 페이지'로 이동해야 합니다.**
      * 이 페이지에서 가입/로그인(`F-00.1`, `F-00.2`)이 이루어져야 합니다.
      * 가입/로그인 성공 시, 쿠키의 `invite_token`을 참조하여 즉시 해당 방으로 이동시킵니다. (`P0: 신규 가입 전환율` 달성을 위한 핵심 로직)
  * **7.6 [v1.3 신규] 유효하지 않은 초대 처리 (Invalid Invite Handling)**
      * **초대 URL의 `invite_token`이 유효하지 않거나 만료(예: 방 삭제)된 경우, 사용자는 "유효하지 않은 초대 링크입니다."와 같은 명확한 '에러 페이지'를 봐야 합니다.**
      * 이 페이지에서 사용자를 `Flow 1 (메인 랜딩)`으로 안내해야 합니다.

-----
